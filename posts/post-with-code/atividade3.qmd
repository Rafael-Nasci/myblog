---
title: "Atividade 3 ‚Äî Regress√£o Linear"
format:
  html:
    code-fold: true
    code-summary: "Mostrar c√≥digo"
execute:
  echo: true
  warning: false
  message: false
---

# Atividade 3 ‚Äî Regress√£o Linear: Anos de Estudo vs. Sal√°rio üí∞

Nesta atividade, calculamos a regress√£o linear entre anos de estudo (X) e sal√°rio (Y) utilizando a solu√ß√£o matricial ($\beta = (X^T X)^{-1} X^T y$).

---

## 1. Carregamento dos Dados e C√°lculo da Regress√£o

```{python}
#| output: false

import numpy as np
import pandas as pd

# ------------------------------------------------------------------
# SIMULA√á√ÉO DA LEITURA DOS ARQUIVOS (X.txt e y.txt)
# ------------------------------------------------------------------
valores_x = np.array([10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20])
valores_y = np.array([2500, 3000, 3800, 4200, 5000, 5500, 6100, 6800, 7500, 8100, 9000])

# ------------------------------------------------------------------
# C√ÅLCULO DA REGRESS√ÉO LINEAR (SOLU√á√ÉO MATRICIAL)
# ------------------------------------------------------------------
X = np.vstack([np.ones(len(valores_x)), valores_x]).T
y = valores_y

XTX_inv = np.linalg.inv(X.T @ X)
beta = XTX_inv @ X.T @ y

a = beta[0]
b = beta[1]
```
## 2. Gr√°fico da Regress√£o Estimada

## 2. Gr√°fico da Regress√£o Estimada

```{python}
#| label: grafico-regressao
#| fig-cap: "Regress√£o Linear: Sal√°rio (y) vs. Anos de Estudo (x)"

from plotnine import (
  ggplot, aes, geom_point, geom_abline, theme, element_text, ggsave) 

# Importa√ß√£o CRUCIAL para exibir o arquivo PNG salvo
from IPython.display import Image, display

# Cria o DataFrame
df = {"x": valores_x, "y": valores_y}

# Cria o objeto plot
plot = (
  ggplot(pd.DataFrame(df), aes("x", "y"))
  + geom_point(color="blue")
  + geom_abline(intercept=a, slope=b, color="red", size=1)
  + theme(text=element_text(size=12))
)

# Salva a imagem no disco (necess√°rio para evitar o KeyError)
nome_arquivo_png = "grafico_regressao.png"
plot.save(nome_arquivo_png, width=6, height=4, units='in')

# Carrega e exibe o arquivo PNG salvo, garantindo que ele apare√ßa no blog.
display(Image(filename=nome_arquivo_png))
```